<!DOCTYPE html><html lang="en"><head><title>FT Interactive Dev Guide</title><script src="https://polyfill.webservices.ft.com/v1/polyfill.min.js?features=default"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.3/normalize.min.css"><link rel="stylesheet" href="https://build.origami.ft.com/bundles/css?modules=o-techdocs@^4.2.1,o-fonts@^1.8.2,o-grid@^3.2.6"><link rel="stylesheet" href="/main.css"><link rel="shortcut icon" href="http://bertha.ig.ft.com/favicon.ico"></head><body class="o-techdocs"><header data-o-component="o-header" class="o-header"><div class="o-header__container"><div class="o-header__inner"><div class="o-header__primary"><div class="o-header__primary__left"><a href="http://www.ft.com" class="o-header__logo o-header__logo--ft"><abbr title="Financial Times">FT</abbr><h1 class="o-header__title">Interactive Dev Guide</h1></a></div></div></div></div></header><div class="o-techdocs-layout"><div class="o-techdocs-sidebar"><ul class="o-techdocs-nav"><li><a href="/">Home</a></li><li><a href="/formats/">Publication formats</a><ul class="o-techdocs-nav o-techdocs-nav--sub"><li><a href="/formats/sites/">Static sites/pages</a></li><li><a href="/formats/wrappers/">Falcon wrapper pages</a></li><li><a href="/formats/iframes/">IFrames</a></li><li><a href="/formats/heroku/">Heroku apps</a></li></ul></li></ul></div><div class="o-techdocs-main"><div class="o-techdocs-content"><h1>Falcon wrapper pages</h1><p class="o-techdocs-leadbody">Wrapper pages are regular (Falcon-style) FT pages – but with no content, only FT navigation and page furniture. We inject our own content into them before serving them to the user.</p><p>Here&#39;s an example of a <a href="http://www.ft.com/thirdpartywrapper/worldeurope">simple wrapper page</a>. Here&#39;s one <a href="http://www.ft.com/thirdpartywrapper/bankcriminalcharges">with a right rail</a> (the right rail content appears to be on the left, but it will be pushed to the right when content is injected into it.)</p>
<p>Notice that each one is set up with a particular breadcrumb trail and highlighted navigation to give the impression that the page is in the normal CMS. In reality, it&#39;s a fake page that is not linked from anywhere.</p>
<h2 id="how-do-we-inject-our-content-">How do we inject our content?</h2>
<p>It&#39;s just a matter of manipulating a string of HTML, and it happens server-side.</p>
<p>Here&#39;s an example:</p>
<p>This <a href="http://ig.ft.com/sites/2015/paris-climate-timeline/">Paris timeline page</a> is served from our IG server. But instead of <code>index.html</code>, the main file is an <code>index.php</code> script. This script loads the <a href="http://www.ft.com/thirdpartywrapper/worldeurope">&quot;World &gt; Europe&quot; wrapper</a> and injects our own content into it. Then it outputs the result.</p>
<p>Wrapper pages are useful for when we want to do layout/scroll-related things, like sticky in-page navigation, but using the classic FT.com layout. But eventually wrappers will be obsolete when the FT switches over to Next.</p>
<h2 id="live-examples">Live examples</h2>
<p>The vast majority of our wrapper pages have been used for timeline stories. These have a &#39;sticky timeline&#39; component that reacts to page scrolling.</p>
<p>With a right rail:</p>
<ul>
<li><a href="http://ig.ft.com/sites/2014/carney-timeline/">Mark Carney Timeline</a> (uses <a href="http://www.ft.com/thirdpartywrapper/carneytimeline">this wrapper</a>)</li>
<li><a href="http://ig.ft.com/sites/2014/guinea-timeline/">The battle for Simandou</a> (uses <a href="http://www.ft.com/thirdpartywrapper/simandou">this wrapper</a>)</li>
</ul>
<p>Full width:</p>
<ul>
<li><a href="http://ig.ft.com/sites/2015/paris-climate-timeline/">Countdown to Paris</a> (uses <a href="http://www.ft.com/thirdpartywrapper/worldeurope">this wrapper</a>)</li>
<li><a href="http://ig.ft.com/sites/2015/ukraine-timeline/">Crisis in Ukraine</a> (uses the same wrapper as the Paris one)</li>
</ul>
<h2 id="how-to-make-one">How to make one</h2>
<p>The basic process is:</p>
<ol>
<li>Get a wrapper set up by Mus, or choose one that already exists (see below). You can always use an existing one during development and switch it out later.</li>
<li>Set up <em>something</em> on the server that will download your wrapper page and dynamically inject your own content into it. You probably want your main content to go in <code>.editorialSection .freestyle[data-comp-index=0]</code>. You may also want to inject scripts/styles into the wrapper&#39;s <code>&lt;head&gt;</code>. And definitely inject something into the wrappers <code>&lt;title&gt;</code> element.</li>
</ol>
<h2 id="injecting-using-php">Injecting using PHP</h2>
<p>This <code>index.php</code> is used for most of our timelines:</p>
<pre><code>&lt;?php
require &#39;CENSORED/wrapper-page-injector.php&#39;; // check an example timeline on the FTP server for the real path!

print injectContentIntoWrapper(
  file_get_contents(&#39;content.html&#39;),
  &#39;http://www.ft.com/thirdpartywrapper/worldeurope&#39;
);
</code></pre><ul>
<li><code>content.html</code> is your own web application (without any FT header/nav/footer etc).</li>
<li>The <code>injectContentIntoWrapper</code> will load the given wrapper URL. Then it will select key pieces of your content page, and copy them over to the correct locations in the wrapper page HTML:<ul>
<li>it copies the <code>&lt;title&gt;</code> from the content page to the wrapper page</li>
<li>it takes any scripts and stylesheets in the content page&#39;s <code>&lt;head&gt;</code> and injects them into the wrapper page&#39;s <code>&lt;head&gt;</code></li>
<li>it takes the entire inner HTML of <code>&lt;body&gt;</code> from the content page, and injects it into <code>.editorialSection .freestyle[data-comp-index=0]</code> in the wrapper page.</li>
</ul>
</li>
</ul>
<h2 id="injecting-using-node">Injecting using Node</h2>
<p><em>This hasn&#39;t been written yet</em></p>
<h2 id="available-wrappers">Available wrappers</h2>
<p>You can reuse any of these. Ignore the naming in the wrapper URLs – many have been given overly specific codenames relating to the articles they were first created for, but all that really matters is which navigation path is highlighted (as this is visible in the main nav and the breadcrumbs) and whether you want to do a full-width or narrow story.</p>
<p>If none of these suit you, request a new one.</p>
<div class="o-techdocs-table-wrapper"><table><thead><tr><th>Wrapper</th><th>Available width</th></tr></thead><tbody><tr><td><a href="http://www.ft.com/thirdpartywrapper/uk">UK</a></td><td>972px</td></tr><tr><td><a href="http://www.ft.com/thirdpartywrapper/sanctions">World</a></td><td>972px</td></tr><tr><td><a href="http://www.ft.com/thirdpartywrapper/worldeurope">World > Europe</a></td><td>972px</td></tr><tr><td><a href="http://www.ft.com/thirdpartywrapper/simandou">World > Africa</a></td><td>600px</td></tr><tr><td><a href="http://www.ft.com/thirdpartywrapper/irannuclearsites">World > Middle East & North Africa > Iran</a></td><td>972px</td></tr><tr><td><a href="http://www.ft.com/thirdpartywrapper/caribbeanmap">World > Latin America & Caribbean</a></td><td>972px</td></tr><tr><td><a href="http://www.ft.com/thirdpartywrapper/retail">Companies > Retail & Consumer</a></td><td>972px</td></tr><tr><td><a href="http://www.ft.com/thirdpartywrapper/the-big-read">Comment > The Big Read</a></td><td>600px</td></tr><tr><td><a href="http://www.ft.com/intl/thirdpartywrapper/bankcriminalcharges">Companies > Financials > Banks</a></td><td>600px</td></tr></tbody></table></div></div></div></div><footer class="o-techdocs-footer"><div class="o-techdocs-footer__inner"><p class="o-techdocs-footer__secondary"><a href="http://github.com/ft-interactive">FT Interactive on GitHub</a></p><p>© THE FINANCIAL TIMES LTD. FT and 'Financial Times' are trademarks of The Financial Times Ltd.</p></div></footer><script src="https://build.origami.ft.com/bundles/js?modules=o-techdocs@^4.2.1,o-fonts@^1.8.2,o-grid@^3.2.6"></script><script>// add aria-selected true where appropriate
[].slice.apply(document.querySelectorAll('.o-techdocs-nav a')).forEach(function (el) {
  console.log('a', el);
  if (el.getAttribute('href') === window.location.pathname) {
    el.closest('li').setAttribute('aria-selected', 'true');
  }
});</script></body></html>